#!/usr/bin/python
import sys
if len(sys.argv) == 2:
    if sys.argv[1] == "main":
        sys.path.insert(0, "/usr/share/pyshared")
        try:
            import atarashii

        except:
            if sys.path[0] == "/usr/share/pyshared": 
                sys.path.pop(0)
    
            sys.exit(3)
        
        # Launch
        atarashii.start()

else:
    # Wrap arround crazy random GDK and XOrg Erros ^.^"
    import subprocess
    error = 0
    while error == 0:
        print "Starting Atarashii..."
        error = subprocess.call(["atarashii", "main"])
        if error == 0:
            print "Atarashii crashed, restarting"
        
        elif error == 2:
            print "Atarashii is already running"
        
        elif error == 3:
            print "Importing Atarashii failed"
